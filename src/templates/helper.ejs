// 自動生成されたヘルパー - <%= model.model %>
import { PrismaClient } from '@prisma/client';
import { Prisma } from '@prisma/client';

const prisma = new PrismaClient();

export class <%= model.model %>QueryBuilder {
  private includes: Record<string, boolean> = {};

  constructor() {
    this.includes = {<% model.relations.forEach((relation, index) => { %>
      <%= relation %>: true,<% }); %>
    };
  }

  async first(): Promise<Prisma.<%= model.model %>GetPayload<{
    include: {<% model.relations.forEach((relation, index) => { %> <%= relation %>: true;<% }); %> };
  }> | null> {
    return prisma.<%= model.model.toLowerCase() %>.findFirst({
      include: {<% model.relations.forEach((relation, index) => { %>
        <%= relation %>: true,<% }); %>
      },
    });
  }

  async get(): Promise<Prisma.<%= model.model %>GetPayload<{
    include: {<% model.relations.forEach((relation, index) => { %> <%= relation %>: true;<% }); %> };
  }>[]> {
    return prisma.<%= model.model.toLowerCase() %>.findMany({
      include: {<% model.relations.forEach((relation, index) => { %>
        <%= relation %>: true,<% }); %>
      },
    });
  }

  async findById(id: number): Promise<Prisma.<%= model.model %>GetPayload<{
    include: {<% model.relations.forEach((relation, index) => { %> <%= relation %>: true;<% }); %> };
  }> | null> {
    return prisma.<%= model.model.toLowerCase() %>.findUnique({
      where: { id },
      include: {<% model.relations.forEach((relation, index) => { %>
        <%= relation %>: true,<% }); %>
      },
    });
  }

  where(conditions: Prisma.<%= model.model %>WhereInput): <%= model.model %>QueryBuilder {
    // eslint-disable-next-line @typescript-eslint/no-unused-vars
    const unused = conditions;
    return this;
  }
}

export const <%= model.model %>Helper = {
  modelName: '<%= model.model %>',
  relations: [<% model.relations.forEach((relation, index) => { %>'<%= relation %>'<%= index < model.relations.length - 1 ? ', ' : '' %><% }); %>],

  async findById(id: number): Promise<Prisma.<%= model.model %>GetPayload<{
    include: {<% model.relations.forEach((relation, index) => { %> <%= relation %>: true;<% }); %> };
  }> | null> {
    return prisma.<%= model.model.toLowerCase() %>.findUnique({
      where: { id },
      include: {<% model.relations.forEach((relation, index) => { %>
        <%= relation %>: true,<% }); %>
      },
    });
  },

  where(conditions: Prisma.<%= model.model %>WhereInput): <%= model.model %>QueryBuilder {
    // eslint-disable-next-line @typescript-eslint/no-unused-vars
    const unused = conditions;
    return new <%= model.model %>QueryBuilder();
  },
};
